UK12
12
Aberystwyth 0.190032E-03 -0.285946E-03
...
Stratford 217.343 -447.089
# Traveling Salesman Problem ‚Äì Genetic Algorithm (C++)

–¢–æ–≤–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å—ä–¥—ä—Ä–∂–∞ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ **–≥–µ–Ω–µ—Ç–∏—á–µ–Ω –∞–ª–≥–æ—Ä–∏—Ç—ä–º (Genetic Algorithm, GA)** –∑–∞ —Ä–µ—à–∞–≤–∞–Ω–µ –Ω–∞ –∑–∞–¥–∞—á–∞—Ç–∞ –∑–∞ —Ç—ä—Ä–≥–æ–≤—Å–∫–∏—è –ø—ä—Ç–Ω–∏–∫ (Traveling Salesman Problem, TSP).

–¶–µ–ª—Ç–∞ –µ –¥–∞ —Å–µ –Ω–∞–º–µ—Ä–∏ **–≤—ä–∑–º–æ–∂–Ω–æ –Ω–∞–π-–∫—Ä–∞—Ç—ä–∫ –º–∞—Ä—à—Ä—É—Ç**, –∫–æ–π—Ç–æ:
- –º–∏–Ω–∞–≤–∞ –ø—Ä–µ–∑ –≤—Å–∏—á–∫–∏ —Ç–æ—á–∫–∏ **—Ç–æ—á–Ω–æ –ø–æ –≤–µ–¥–Ω—ä–∂**
- –º–µ–∂–¥—É –≤—Å—è–∫–∞ –¥–≤–æ–π–∫–∞ —Ç–æ—á–∫–∏ –∏–º–∞ –ø—ä—Ç
- **–Ω–∞—á–∞–ª–Ω–∞—Ç–∞ —Ç–æ—á–∫–∞ –Ω—è–º–∞ –∑–Ω–∞—á–µ–Ω–∏–µ** ‚Äì –Ω–µ –µ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ –º–∞—Ä—à—Ä—É—Ç—ä—Ç –¥–∞ —Å–µ –≤—Ä—ä—â–∞ –≤ –∏–∑—Ö–æ–¥–Ω–∞—Ç–∞ –ø–æ–∑–∏—Ü–∏—è (–æ—Ç–≤–æ—Ä–µ–Ω —Ç—É—Ä).

---

## üß† –û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –∑–∞–¥–∞—á–∞—Ç–∞

–ò–º–∞–º–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ—Ç —Ç–æ—á–∫–∏ (–≥—Ä–∞–¥–æ–≤–µ) –≤ —Ä–∞–≤–Ω–∏–Ω–∞—Ç–∞ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ (X, Y).  
–¢—ä—Ä—Å–∏–º –ø–æ–¥—Ä–µ–¥–±–∞ –Ω–∞ —Ç–µ–∑–∏ —Ç–æ—á–∫–∏ (–ø–µ—Ä–º—É—Ç–∞—Ü–∏—è), –∫–æ—è—Ç–æ –º–∏–Ω–∏–º–∏–∑–∏—Ä–∞ —Å—É–º–∞—Ç–∞ –æ—Ç –µ–≤–∫–ª–∏–¥–æ–≤–∏—Ç–µ —Ä–∞–∑—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–∏—Ç–µ —Ç–æ—á–∫–∏ –≤ –º–∞—Ä—à—Ä—É—Ç–∞.

–ì–µ–Ω–µ—Ç–∏—á–Ω–∏—è—Ç –∞–ª–≥–æ—Ä–∏—Ç—ä–º —Ä–∞–±–æ—Ç–∏ —Å –ø–æ–ø—É–ª–∞—Ü–∏—è –æ—Ç –≤—ä–∑–º–æ–∂–Ω–∏ –º–∞—Ä—à—Ä—É—Ç–∏ –∏ –ø—Ä–∏–ª–∞–≥–∞:
- **—Å–µ–ª–µ–∫—Ü–∏—è** (tournament selection)
- **–∫—Ä—ä—Å—Ç–æ—Å–≤–∞–Ω–µ** (crossover) –≤—ä—Ä—Ö—É –ø–µ—Ä–º—É—Ç–∞—Ü–∏–∏
- **–º—É—Ç–∞—Ü–∏—è** (swap / reverse mutation)
- **–µ–ª–∏—Ç–∏–∑—ä–º** (–∑–∞–ø–∞–∑–≤–∞–Ω–µ –Ω–∞ –Ω–∞–π-–¥–æ–±—Ä–∏—è –∏–Ω–¥–∏–≤–∏–¥)

---

## üß¨ –ò–∑–ø–æ–ª–∑–≤–∞–Ω –≥–µ–Ω–µ—Ç–∏—á–µ–Ω –∞–ª–≥–æ—Ä–∏—Ç—ä–º

–û—Å–Ω–æ–≤–Ω–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:

### –ü—Ä–µ–¥—Å—Ç–∞–≤—è–Ω–µ (encoding)
- –ï–¥–∏–Ω –º–∞—Ä—à—Ä—É—Ç = –µ–¥–Ω–∞ **–ø–µ—Ä–º—É—Ç–∞—Ü–∏—è** –Ω–∞ —á–∏—Å–ª–∞—Ç–∞ `0..N-1`, –∫—ä–¥–µ—Ç–æ –∏–Ω–¥–µ–∫—Å—ä—Ç –æ—Ç–≥–æ–≤–∞—Ä—è –Ω–∞ –¥–∞–¥–µ–Ω –≥—Ä–∞–¥.

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –ø–æ–ø—É–ª–∞—Ü–∏—è—Ç–∞
- –ì–µ–Ω–µ—Ä–∏—Ä–∞—Ç —Å–µ `population_max` –Ω–∞ –±—Ä–æ–π —Å–ª—É—á–∞–π–Ω–∏ –ø–µ—Ä–º—É—Ç–∞—Ü–∏–∏ —á—Ä–µ–∑ —Ä–∞–∑–±—ä—Ä–∫–≤–∞–Ω–µ (`std::shuffle`).

### –û—Ü–µ–Ω–∫–∞ (fitness / cost)
- –ó–∞ –≤—Å–µ–∫–∏ –∏–Ω–¥–∏–≤–∏–¥ —Å–µ –∏–∑—á–∏—Å–ª—è–≤–∞:
  - `pathLength = sum(dist[route[i]][route[i+1]])`, –∫–∞—Ç–æ **–Ω–µ —Å–µ –≤—Ä—ä—â–∞** –∫—ä–º –ø—ä—Ä–≤–∏—è –≥—Ä–∞–¥ (–æ—Ç–≤–æ—Ä–µ–Ω —Ç—É—Ä, —Å–ø–æ—Ä–µ–¥ —É—Å–ª–æ–≤–∏–µ—Ç–æ).
- –í –Ω—è–∫–æ–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∏ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ –∏ `fitness = maxCost - cost`, –∑–∞ –¥–∞ —Å–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É–≤–∞ –∑–∞–¥–∞—á–∞—Ç–∞ –∑–∞ –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –∫—ä–º –º–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏—è (—É–¥–æ–±–Ω–æ –∑–∞ –Ω—è–∫–æ–∏ –≤–∏–¥–æ–≤–µ —Å–µ–ª–µ–∫—Ü–∏—è).

### –°–µ–ª–µ–∫—Ü–∏—è (selection)
- –ò–∑–ø–æ–ª–∑–≤–∞ —Å–µ **tournament selection**:
  - –∏–∑–±–∏—Ä–∞—Ç —Å–µ `k` —Å–ª—É—á–∞–π–Ω–∏ –∏–Ω–¥–∏–≤–∏–¥–∞ –æ—Ç –ø–æ–ø—É–ª–∞—Ü–∏—è—Ç–∞
  - –∑–∞ —Ä–æ–¥–∏—Ç–µ–ª —Å–µ –∏–∑–±–∏—Ä–∞ —Ç–æ–∑–∏ —Å **–Ω–∞–π-–∫—ä—Å –ø—ä—Ç** (–∏–ª–∏ –Ω–∞–π-–≤–∏—Å–æ–∫ fitness, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç –æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç–∞)

### –ö—Ä—ä—Å—Ç–æ—Å–≤–∞–Ω–µ (crossover)
- –ò–∑–ø–æ–ª–∑–≤–∞ —Å–µ crossover, –ø–æ–¥—Ö–æ–¥—è—â –∑–∞ –ø–µ—Ä–º—É—Ç–∞—Ü–∏–∏ (TSP):
  - **Order Crossover (OX)** –∏–ª–∏
  - **PMX (Partially Mapped Crossover)** –∏–ª–∏
  - **Permutation-safe Uniform Crossover**
- –¶–µ–ª—Ç–∞ –µ:
  - –¥–∞ —Å–µ –∫–æ–º–±–∏–Ω–∏—Ä–∞—Ç –ø–æ–¥—Ä–µ–¥–±–∏—Ç–µ –Ω–∞ –¥–≤–∞–º–∞—Ç–∞ —Ä–æ–¥–∏—Ç–µ–ª–∏
  - –±–µ–∑ –¥–∞ —Å–µ –ø–æ–ª—É—á–∞–≤–∞—Ç –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è / –ª–∏–ø—Å–≤–∞—â–∏ –≥—Ä–∞–¥–æ–≤–µ
  - –¥–∞ —Å–µ –∑–∞–ø–∞–∑–≤–∞—Ç –≤—ä–∑–º–æ–∂–Ω–æ –ø–æ–≤–µ—á–µ ‚Äû–¥–æ–±—Ä–∏‚Äú –ø–æ–¥—Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª–∏—Ç–µ

### –ú—É—Ç–∞—Ü–∏—è (mutation)
- –ò–∑–ø–æ–ª–∑–≤–∞—Ç —Å–µ –º—É—Ç–∞—Ü–∏–∏, –≤–∞–ª–∏–¥–Ω–∏ –∑–∞ –ø–µ—Ä–º—É—Ç–∞—Ü–∏–∏:
  - **Swap mutation** ‚Äì —Ä–∞–∑–º–µ–Ω—è –¥–≤–∞ –ø—Ä–æ–∏–∑–≤–æ–ª–Ω–∏ –≥—Ä–∞–¥–∞ –≤ –º–∞—Ä—à—Ä—É—Ç–∞
  - **Reverse / Inversion mutation** ‚Äì –æ–±—Ä—ä—â–∞ –ø—Ä–æ–∏–∑–≤–æ–ª–µ–Ω –ø–æ–¥-—Å–µ–≥–º–µ–Ω—Ç –æ—Ç –º–∞—Ä—à—Ä—É—Ç–∞
- –í –∫–æ–¥–∞ –µ —Ä–µ–∞–ª–∏–∑–∏—Ä–∞–Ω–∞ **–∞–¥–∞–ø—Ç–∏–≤–Ω–∞ –º—É—Ç–∞—Ü–∏—è**:
  - –∑–∞–ø–æ—á–≤–∞ —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç ~5%
  - –∞–∫–æ –∑–∞ –Ω—è–∫–æ–ª–∫–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è –Ω—è–º–∞ –ø–æ–¥–æ–±—Ä–µ–Ω–∏–µ –Ω–∞ –Ω–∞–π-–¥–æ–±—Ä–∏—è –º–∞—Ä—à—Ä—É—Ç ‚Üí –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—Ç–∞ –∑–∞ –º—É—Ç–∞—Ü–∏—è —Å–µ —É–≤–µ–ª–∏—á–∞–≤–∞ (–¥–æ –º–∞–∫—Å–∏–º—É–º ~95%)

### –ï–ª–∏—Ç–∏–∑—ä–º (elitism)
- –ù–∞–π-–¥–æ–±—Ä–∏—è—Ç –∏–Ω–¥–∏–≤–∏–¥ –≤ —Ç–µ–∫—É—â–æ—Ç–æ –ø–æ–∫–æ–ª–µ–Ω–∏–µ —Å–µ **–∫–æ–ø–∏—Ä–∞ –¥–∏—Ä–µ–∫—Ç–Ω–æ** –≤ —Å–ª–µ–¥–≤–∞—â–æ—Ç–æ –ø–æ–∫–æ–ª–µ–Ω–∏–µ.
- –¢–æ–≤–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞, —á–µ –Ω–∞–π-–¥–æ–±—Ä–æ—Ç–æ –Ω–∞–º–µ—Ä–µ–Ω–æ —Ä–µ—à–µ–Ω–∏–µ **–Ω—è–º–∞ –¥–∞ –±—ä–¥–µ –∑–∞–≥—É–±–µ–Ω–æ** –æ—Ç –∫—Ä—ä—Å—Ç–æ—Å–≤–∞–Ω–µ / –º—É—Ç–∞—Ü–∏—è.

---

## üì• –í—Ö–æ–¥

–ü—Ä–æ–≥—Ä–∞–º–∞—Ç–∞ –ø–æ–¥–¥—ä—Ä–∂–∞ –¥–≤–∞ —Ä–µ–∂–∏–º–∞ —Å–ø–æ—Ä–µ–¥ —É—Å–ª–æ–≤–∏–µ—Ç–æ:

1. **–°–ª—É—á–∞–π–Ω–∏ —Ç–æ—á–∫–∏**
   ```text
   N
N (N ‚â§ 100) ‚Äì —Ü—è–ª–æ —á–∏—Å–ª–æ

–ì–µ–Ω–µ—Ä–∏—Ä–∞—Ç —Å–µ N –ø—Ä–æ–∏–∑–≤–æ–ª–Ω–∏ —Ç–æ—á–∫–∏ –≤ —Ä–∞–≤–Ω–∏–Ω–∞—Ç–∞ (–Ω–∞–ø—Ä. —Å—ä—Å —Å–ª—É—á–∞–π–Ω–∏ X –∏ Y –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏).

–ò–º–µ–Ω—É–≤–∞–Ω –Ω–∞–±–æ—Ä –æ—Ç –¥–∞–Ω–Ω–∏

text
Copy code
DatasetName
N
CityName1  X1  Y1
CityName2  X2  Y2
...
CityNameN  XN  YN
–ü—Ä–∏–º–µ—Ä:

text
Copy code
UK12
12
Aberystwyth 0.190032E-03 -0.285946E-03
...
Stratford 217.343 -447.089
üì§ –ò–∑—Ö–æ–¥
–ü—Ä–æ–≥—Ä–∞–º–∞—Ç–∞ –∏–∑–≤–µ–∂–¥–∞:

–ü–æ–Ω–µ 10 —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ (–ø–æ –µ–¥–Ω–∞ –Ω–∞ —Ä–µ–¥) ‚Äì —Ç–µ–∫—É—â–æ –Ω–∞–π-–¥–æ–±—Ä–∏—è—Ç –ø—ä—Ç –≤ –ø–æ–ø—É–ª–∞—Ü–∏—è—Ç–∞:

–ø—ä—Ä–≤–æ—Ç–æ –ø–æ–∫–æ–ª–µ–Ω–∏–µ

–ø–æ–Ω–µ 8 –º–µ–∂–¥–∏–Ω–Ω–∏

–ø–æ—Å–ª–µ–¥–Ω–æ—Ç–æ –ø–æ–∫–æ–ª–µ–Ω–∏–µ

–ü—Ä–∞–∑–µ–Ω —Ä–µ–¥.

–ù–∞–π-–¥–æ–±—Ä–æ—Ç–æ –Ω–∞–º–µ—Ä–µ–Ω–æ —Ä–µ—à–µ–Ω–∏–µ:

–ø—Ä–∏ —Å–ª—É—á–∞–π–Ω–∏ —Ç–æ—á–∫–∏ ‚Äì —Å–∞–º–æ —Ñ–∏–Ω–∞–ª–Ω–∞—Ç–∞ –¥—ä–ª–∂–∏–Ω–∞ (–µ–¥–Ω–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç)

–ø—Ä–∏ –∏–º–µ–Ω—É–≤–∞–Ω –Ω–∞–±–æ—Ä ‚Äì –µ–¥–∏–Ω —Ä–µ–¥ —Å –º–∞—Ä—à—Ä—É—Ç–∞:

text
Copy code
CityA -> CityB -> ... -> CityN
–∏ –Ω–∞ —Å–ª–µ–¥–≤–∞—â —Ä–µ–¥ ‚Äì —Ñ–∏–Ω–∞–ª–Ω–∞—Ç–∞ –¥—ä–ª–∂–∏–Ω–∞.

–§–∏–Ω–∞–ª–Ω–∞—Ç–∞ –¥—ä–ª–∂–∏–Ω–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å—ä–≤–ø–∞–¥–∞:

—Å –ø–æ—Å–ª–µ–¥–Ω–∞—Ç–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç –æ—Ç –±–ª–æ–∫–∞ —Å 10-—Ç–µ (–∏–ª–∏ –ø–æ–≤–µ—á–µ) —Å—Ç–æ–π–Ω–æ—Å—Ç–∏

—Å –ø—Ä–µ–∏–∑—á–∏—Å–ª–µ–Ω–∞—Ç–∞ –¥—ä–ª–∂–∏–Ω–∞ –æ—Ç –º–∞—Ä—à—Ä—É—Ç–∞.

‚è± –ò–∑–º–µ—Ä–≤–∞–Ω–µ –Ω–∞ –≤—Ä–µ–º–µ
–í —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ç–∞ –µ –ø—Ä–µ–¥–≤–∏–¥–µ–Ω–∞ –≤—ä–∑–º–æ–∂–Ω–æ—Å—Ç –¥–∞ —Å–µ –∏–∑–º–µ—Ä–≤–∞ –≤—Ä–µ–º–µ—Ç–æ –∑–∞ —Ä–∞–±–æ—Ç–∞ –Ω–∞ –∞–ª–≥–æ—Ä–∏—Ç—ä–º–∞ —Å –ø–æ–º–æ—â—Ç–∞ –Ω–∞ std::chrono:

–∑–∞–ø–∏—Å–≤–∞ —Å–µ –Ω–∞—á–∞–ª–Ω–æ –≤—Ä–µ–º–µ auto start = std::chrono::steady_clock::now();

–ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ —Å–µ –∏–∑–º–µ—Ä–≤–∞ —Ç–µ–∫—É—â–æ—Ç–æ –≤—Ä–µ–º–µ –∏ —Ä–∞–∑–ª–∏–∫–∞—Ç–∞:

cpp
Copy code
auto now = std::chrono::steady_clock::now();
std::chrono::duration<double> elapsed = now - start;
–º–æ–∂–µ –¥–∞ —Å–µ:

–æ–≥—Ä–∞–Ω–∏—á–∞—Ç –ø–æ–∫–æ–ª–µ–Ω–∏—è—Ç–∞ –ø–æ –≤—Ä–µ–º–µ (–Ω–∞–ø—Ä. ‚Äû—Ä–∞–±–æ—Ç–∏ –¥–æ 10 —Å–µ–∫—É–Ω–¥–∏‚Äú)

–ª–æ–≥–≤–∞ –ø—Ä–æ–≥—Ä–µ—Å –ø—Ä–µ–∑ —Ä–∞–≤–Ω–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏

–í –º–æ–º–µ–Ω—Ç–∞ –æ—Å–Ω–æ–≤–Ω–∞—Ç–∞ –≤–µ—Ä—Å–∏—è —Ä–∞–±–æ—Ç–∏ —Å —Ñ–∏–∫—Å–∏—Ä–∞–Ω –±—Ä–æ–π –ø–æ–∫–æ–ª–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä generations = 500), –Ω–æ –∫–æ–¥—ä—Ç –º–æ–∂–µ –ª–µ—Å–Ω–æ –¥–∞ –±—ä–¥–µ –ø—Ä–æ–º–µ–Ω–µ–Ω –¥–∞ —Å–ø–∏—Ä–∞ –ø–æ –≤—Ä–µ–º–µ –≤–º–µ—Å—Ç–æ –ø–æ –±—Ä–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.

üõ† –ö–æ–º–ø–∏–ª–∞—Ü–∏—è –∏ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ
–ü—Ä–∏–º–µ—Ä –∑–∞ –∫–æ–º–ø–∏–ª–∏—Ä–∞–Ω–µ —Å g++:

bash
Copy code
g++ -std=c++17 -O2 -Wall -o tsp_ga main.cpp
–ü—Ä–∏–º–µ—Ä –∑–∞ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ —Å –∏–º–µ–Ω—É–≤–∞–Ω –Ω–∞–±–æ—Ä:

bash
Copy code
./tsp_ga < input_uk12.txt
–∫—ä–¥–µ—Ç–æ input_uk12.txt —Å—ä–¥—ä—Ä–∂–∞:

text
Copied
UK12
12
Aberystwyth 0.190032E-03 -0.285946E-03
...
Stratford 217.343 -447.089